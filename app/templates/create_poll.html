{% extends "base.html" %}

{% block title %}Create a New Poll{% endblock %}

{% block content %}
<h2>Create a New Poll</h2>
<form method="POST" id="poll-form">
    <div class="form-group">
        <label for="title">Title</label>
        <input type="text" name="title" id="title" class="form-control" required maxlength="40"">
    </div>
    <div class="form-group">
        <label for="description">Description (Optional)</label>
        <textarea name="description" id="description" class="form-control"maxlength = 70></textarea>
    </div>

    <hr>
    
    <h4>Options</h4>
    <div id="options-container">
        <div class="form-group">
            <input type="text" name="options" class="form-control" placeholder="Option 1" required maxlength="25">
        </div>
        <div class="form-group">
            <input type="text" name="options" class="form-control" placeholder="Option 2" required maxlength="25">
        </div>
    </div>
    
    <button type="button" id="add-option-btn" class="btn btn-secondary">Add Option</button>
    <br><br>
    <button type="submit" class="btn btn-primary">Create Poll</button>
</form>

<script>
    document.getElementById('add-option-btn').addEventListener('click', function() {
        const container = document.getElementById('options-container');
        const optionCount = container.getElementsByTagName('input').length + 1;

        const newOptionDiv = document.createElement('div');
        newOptionDiv.className = 'form-group';
        
        const newOptionInput = document.createElement('input');
        newOptionInput.type = 'text';
        newOptionInput.name = 'options';
        newOptionInput.className = 'form-control';
        newOptionInput.placeholder = 'Option ' + optionCount;
        newOptionInput.maxLength = 25;
        newOptionDiv.appendChild(newOptionInput);
        container.appendChild(newOptionDiv);
    });
</script>
{% endblock %}